branches:
  only:
    - master
language: cpp
dist: jammy
services:
  - docker
env:
  - BUILD_TYPE=ReleaseFast
  - BUILD_TYPE=Debug

before_install:
  - sudo apt update
  - sudo apt install -y \
      qemu-system-x86 qemu-utils ovmf
  - sudo snap install zig --channel=latest/beta --classic
  - zig version
  - uname -a
  - ls /dev/kvm -la

script:
  - zig build install -Dlog_level=debug -Doptimize=$BUILD_TYPE -Druntime_test=true
  - bash ./runtime_test.bash
